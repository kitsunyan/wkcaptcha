# wkcaptcha
### Description
Free and open source software for recognition of standard captcha included in Wakaba message board which do not contain any binary blobs or pretrained classifiers. Recognition rate expected to be no less than 80%. Done mostly for author's learning purposes.

### Dependencies
#### Python dependencies 
`numpy` `scipy` `scikit-image` `scikit-learn`

Can be installed using: `pip3 install -r requirements.txt`.
#### Perl
Perl is required for captcha generation using original Wakaba script.
#### Installation on Debian-like distribution
As tested on Ubuntu 16.04:

```apt-get install perl python3-numpy python3-scipy python3-sklearn python3-skimage```

### Usage
`python3 wkcaptcha.py [FILE|URL]`

FILE or URL should point to image to recognize. First run with default parameters can take up to 20-30 minutes to generate learning set and train neural network on it. Subsequent recognition-only runs should take less than second.

If considered Wakaba installation is using non-default captcha settings then better recognition rate can be achieved by tweaking captcha generation settings accordingly. It can be done by selecting appropriate values for `CAPTCHA_ROTATION` `CAPTCHA_SCRIBBLE` in `gencaptcha.pl`. Also in achieving balance between high recognition rate and short learning time tweaking of `gen_train_size` `hidden_layer` `maxiter` parameters in `config.py` can be used. To retrain network with new parameters remove `data` directory and rerun.

### Algorithm
Segmentation algorithm is the just simplest algorithm using connected components which even can't handle crossing characters. Character recognition algorithm is neural network classifier with one hidden layer (written from scratch), trained using data generated by original captcha generation script from Wakaba (`captcha.pl`). Individual character recognition rate is around 98%.

All learning data is deterministically generated, learning process is reproducible and can be tweaked to retrain character recognition algorithm for one's needs.
